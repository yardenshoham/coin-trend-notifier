{"components":{"schemas":{"UserUpdateDto":{"properties":{"email":{"format":"email","type":"string"},"username":{"pattern":"^[a-zA-Z0-9_-]{2,20}$","type":"string"},"phoneNumber":{"type":"string"},"alertLimit":{"minimum":0,"type":"number"}},"type":"object","required":["email","username","alertLimit"]},"UserDto":{"properties":{"notifiedAt":{"exclusiveMinimum":true,"minimum":0,"type":"number"},"email":{"format":"email","type":"string"},"username":{"pattern":"^[a-zA-Z0-9_-]{2,20}$","type":"string"},"phoneNumber":{"type":"string"},"alertLimit":{"minimum":0,"type":"number"}},"type":"object","required":["email","username","alertLimit"]},"UserDtoIn":{"properties":{"password":{"type":"string","minLength":6},"email":{"format":"email","type":"string"},"username":{"pattern":"^[a-zA-Z0-9_-]{2,20}$","type":"string"},"phoneNumber":{"type":"string"},"alertLimit":{"minimum":0,"type":"number"},"notifiedAt":{"exclusiveMinimum":true,"minimum":0,"type":"number"}},"type":"object","required":["password","email","username","alertLimit"]},"User":{"properties":{"email":{"format":"email","type":"string"},"username":{"pattern":"^[a-zA-Z0-9_-]{2,20}$","type":"string"},"_password":{"pattern":"^\\$2[ayb]\\$[\\d]{2}\\$[./A-Za-z0-9]{53}$","type":"string"},"alertLimit":{"minimum":0,"type":"number"},"phoneNumber":{},"_firebaseInstanceIdToken":{}},"type":"object","required":["email","username","_password","alertLimit"]},"UserLoginDto":{"properties":{"email":{"format":"email","type":"string"},"password":{"type":"string","minLength":6}},"type":"object","required":["email","password"]},"RegisteredUserDto":{"properties":{"_id":{"pattern":"^[0-9a-fA-F]{24}$","type":"string"},"email":{"format":"email","type":"string"},"username":{"pattern":"^[a-zA-Z0-9_-]{2,20}$","type":"string"},"phoneNumber":{"type":"string"},"alertLimit":{"minimum":0,"type":"number"},"notifiedAt":{"exclusiveMinimum":true,"minimum":0,"type":"number"}},"type":"object","required":["_id","email","username","alertLimit"]},"ChangePasswordDto":{"properties":{"oldPassword":{"type":"string","minLength":6},"newPassword":{"type":"string","minLength":6}},"type":"object","required":["oldPassword","newPassword"]},"SetFirebaseInstanceIdTokenDto":{"properties":{"token":{}},"type":"object","required":["token"]},"PreferenceDto":{"properties":{"baseAssetName":{"type":"string"},"quoteAssetName":{"type":"string"}},"type":"object","required":["baseAssetName","quoteAssetName"]},"SetPreferenceDto":{"properties":{"probability":{"maximum":1,"type":"number","minimum":-1},"baseAssetName":{"type":"string"},"quoteAssetName":{"type":"string"}},"type":"object","required":["probability","baseAssetName","quoteAssetName"]},"Chance":{"properties":{"_decayPeriod":{"minimum":3600,"type":"number"},"_probability":{"maximum":1,"type":"number","minimum":-1}},"type":"object","required":["_decayPeriod","_probability"]},"Asset":{"properties":{"name":{"type":"string"}},"type":"object","required":["name"]},"CryptoSymbolInfo":{"properties":{"preferences":{"items":{"maximum":1,"type":"number","minimum":-1},"type":"array"}},"type":"object","required":["preferences"]},"SymbolEvent":{"properties":{"probability":{"maximum":1,"type":"number","minimum":-1},"cryptoSymbolInfo":{},"firedAt":{}},"type":"object","required":["probability","cryptoSymbolInfo","firedAt"]},"CryptoSymbol":{"properties":{"cryptoSymbolInfo":{}},"type":"object","required":["cryptoSymbolInfo"]},"EventDto":{"properties":{"_id":{"pattern":"^[0-9a-fA-F]{24}$","type":"string"},"probability":{"maximum":1,"type":"number","minimum":-1},"firedAt":{"exclusiveMinimum":true,"minimum":0,"type":"number"},"baseAssetName":{"type":"string"},"quoteAssetName":{"type":"string"}},"type":"object","required":["_id","probability","firedAt","baseAssetName","quoteAssetName"]}},"securitySchemes":{"bearerAuth":{"scheme":"bearer","type":"http","bearerFormat":"JWT"}}},"info":{"title":"Coin Trend Notifier API","version":"1.0.0"},"openapi":"3.0.0","paths":{"/users":{"post":{"operationId":"UserController.signUp","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDtoIn"},"example":{"email":"test.me@gmail.com","password":"12345678","username":"test_user","phoneNumber":"+972-523546888","alertLimit":0}}},"description":"UserDtoIn","required":true},"responses":{"200":{"content":{"application/json":{"example":{"email":"test.me@gmail.com","username":"test_user","alertLimit":0,"phoneNumber":"+972-523546888","_id":"5e19bb04bed2e852c07554e4"},"schema":{"$ref":"#/components/schemas/RegisteredUserDto"}}},"description":"The user successfully registered."},"422":{"content":{"application/json":{"schema":{"oneOf":[{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]},{"type":"object","properties":{"errors":{"type":"array","items":{"type":"object","properties":{"property":{"type":"string"},"value":{"type":"any"},"constraints":{"type":"object"},"children":{"type":"object"}},"required":["property","value"]}}},"required":["errors"]}]}}},"description":"An error occurred. Either the user already exists or one or more properties were not valid."}},"summary":"Sign up","tags":["User"],"description":"Register a user"},"put":{"operationId":"UserController.updateUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateDto"},"example":{"email":"test.me@gmail.com","username":"test_user","phoneNumber":"+972-523546888","alertLimit":604800}}},"description":"UserUpdateDto","required":true},"responses":{"200":{"content":{"application/json":{"example":{"_id":"5e19bb04bed2e852c07554e4","email":"test.me@gmail.com","username":"test_user","phoneNumber":"+972-523546888","alertLimit":604800},"schema":{"$ref":"#/components/schemas/RegisteredUserDto"}}},"description":"The user's properties were successfully updated."},"400":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"message":{"type":"string"},"errors":{"type":"array","items":{"type":"object","properties":{"target":{},"property":{"type":"string"},"value":{"type":"any"},"constraints":{"type":"object"},"children":{"type":"array"}},"required":["property","value"]}}}}}},"description":"Validation Error."},"409":{"content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}},"description":"Either the user does not exist or the given email was taken."}},"summary":"Update user","tags":["User"],"security":[{"bearerAuth":[]}],"description":"Update a user's properties."},"get":{"operationId":"UserController.getUser","responses":{"200":{"content":{"application/json":{"example":{"email":"test.me@gmail.com","username":"test_user","alertLimit":0,"phoneNumber":"+972-523546888","_id":"5e19bb04bed2e852c07554e4"},"schema":{"$ref":"#/components/schemas/RegisteredUserDto"}}},"description":"The user was successfully identified."},"400":{"content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}},"example":{"error":"The user hasn't registered."}}},"description":"An error occurred. The user does not exist."}},"summary":"Get user","tags":["User"],"security":[{"bearerAuth":[]}],"description":"Get information about the current user"}},"/users/login":{"post":{"operationId":"UserController.login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLoginDto"},"example":{"email":"test.user@testdomain.com","password":"123456789"}}},"description":"The credentials (email and password) of the user that wants to login.","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"jwt":{"type":"string"}},"required":["jwt"]},"example":{"jwt":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZTE5YjhlZmJlZDJlODUyYzA3NTU0ZTMiLCJpYXQiOjE1Nzg3NDQwNTZ9.lnf6tlSA1_EGFA23Ks_rOaZ2skd960zr5QeRc5vOonU"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}},"description":"The user is not registered or an incorrect password was provided."}},"summary":"Login","tags":["User"],"description":"Login a user"}},"/users/password":{"patch":{"operationId":"UserController.changePassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"},"example":{"oldPassword":"12345678","newPassword":"123456789"}}},"description":"ChangePasswordDto","required":true},"responses":{"204":{"content":{"application/json":{}},"description":"Successful response"},"400":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"message":{"type":"string"},"errors":{"type":"array","items":{"type":"object","properties":{"target":{},"property":{"type":"string"},"value":{"type":"any"},"constraints":{"type":"object"},"children":{"type":"array"}},"required":["property","value"]}}}}}},"description":"Validation Error."},"422":{"content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}},"description":"An error occurred. Either the user does not exist or password was not correct/invalid."}},"summary":"Change password","tags":["User"],"security":[{"bearerAuth":[]}],"description":"Change a user's password."}},"/users/firebase":{"patch":{"operationId":"UserController.setFirebaseInstanceIdToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetFirebaseInstanceIdTokenDto"},"example":{"token":"d-xrKw7GQyWJP0pALT8nQx:APA91bFqgP4DlUUFteEWEQjAusC2oTu94qYYcfCrjGes4VAG9voEXgtVKgipquZJumxOIAzSGZHz8di0PA2TAY46lyKGHsNFNh_RYfAJ5RM-2Aw7uR8I4kld2pffxGpTMbKjCwWl3nOs"}}},"description":"SetFirebaseInstanceIdTokenDto","required":true},"responses":{"204":{"content":{"application/json":{}},"description":"Successful response"},"400":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"message":{"type":"string"},"errors":{"type":"array","items":{"type":"object","properties":{"target":{},"property":{"type":"string"},"value":{"type":"any"},"constraints":{"type":"object"},"children":{"type":"array"}},"required":["property","value"]}}}}}},"description":"Validation Error."}},"summary":"Set firebase instance id token","tags":["User"],"security":[{"bearerAuth":[]}],"description":"Set a user's mobile app id."}},"/preferences":{"post":{"operationId":"PreferenceController.setPreference","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetPreferenceDto"},"example":{"baseAssetName":"ETH","quoteAssetName":"USDT","probability":0.7}}},"description":"SetPreferenceDto","required":true},"responses":{"204":{"content":{"application/json":{}},"description":"Successful response"},"422":{"content":{"application/json":{"schema":{"oneOf":[{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]},{"type":"object","properties":{"errors":{"type":"array","items":{"type":"object","properties":{"property":{"type":"string"},"value":{"type":"any"},"constraints":{"type":"object"},"children":{"type":"object"}},"required":["property","value"]}}},"required":["errors"]}]}}},"description":"An error occurred. Either the user already exists, the probability is not between -1 and 1, base asset is the same as quote asset or one or more properties were not valid."}},"summary":"Set preference","tags":["Preference"],"security":[{"bearerAuth":[]}],"description":"Set a user's wanted probability threshold to be notified about a rise/fall of a symbol."},"delete":{"operationId":"PreferenceController.deletePreference","parameters":[{"in":"query","name":"PreferenceDto","required":true,"schema":{"$ref":"#/components/schemas/PreferenceDto"}}],"responses":{"204":{"content":{"application/json":{}},"description":"Successful response"},"422":{"content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}},"description":"An error occurred. The user does not exist."}},"summary":"Delete preference","tags":["Preference"],"security":[{"bearerAuth":[]}],"description":"Remove a user's wanted probability threshold to be notified about a rise/fall of a symbol."},"get":{"operationId":"PreferenceController.getPreferences","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SetPreferenceDto"},"type":"array"}}},"description":"Successful response."},"422":{"content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}},"description":"An error occurred. The user does not exist."}},"summary":"Get preferences","tags":["Preference"],"security":[{"bearerAuth":[]}],"description":"Retrieve all of the given user's preferences."}},"/events":{"get":{"operationId":"EventController.getEvents","parameters":[{"in":"query","name":"amount","required":false,"schema":{"type":"number"},"description":"A positive number representing the limit of events to return."}],"responses":{"200":{"content":{"application/json":{"example":[{"_id":"00000000a26f35468412bb0f","probability":0.25,"firedAt":20,"baseAssetName":"BTC","quoteAssetName":"ETH"},{"_id":"00000000a26f35468412bb0e","probability":0.2,"firedAt":10,"baseAssetName":"BTC","quoteAssetName":"USDT"}],"schema":{"items":{"$ref":"#/components/schemas/EventDto"},"type":"array"}}},"description":"Successful response."},"400":{"content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}},"description":"An error occurred. Invalid user or a negative amount."}},"summary":"Get events","tags":["Event"],"security":[{"bearerAuth":[]}],"description":"Retrieve a specified amount of the most recent events of a given user."}},"/events/analysis":{"get":{"operationId":"EventController.getAllEvents","responses":{"200":{"content":{"application/json":{"example":[{"_id":"00000000a26f35468412bb0f","probability":0.25,"firedAt":20,"baseAssetName":"BTC","quoteAssetName":"ETH"},{"_id":"00000000a26f35468412bb0e","probability":0.2,"firedAt":10,"baseAssetName":"BTC","quoteAssetName":"USDT"}],"schema":{"items":{"$ref":"#/components/schemas/EventDto"},"type":"array"}}},"description":"Successful response."}},"summary":"Get all events","tags":["Event"],"description":"Retrieve all events.","parameters":[{"in":"query","name":"amount","description":"A positive number representing the limit of events to return."}]}},"/events/{id}":{"get":{"operationId":"EventController.getById","parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"example":{"_id":"00000000a26f35468412bb0f","probability":0.25,"firedAt":20,"baseAssetName":"BTC","quoteAssetName":"ETH"},"schema":{"$ref":"#/components/schemas/EventDto"}}},"description":"Successful response."},"404":{"content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}},"description":"An error occurred. The id is invalid."}},"summary":"Get by id","tags":["Event"],"description":"Retrieve a specific event given its id."}}},"servers":[{"url":"https://coin-trend-notifier-api.herokuapp.com/api"}]}